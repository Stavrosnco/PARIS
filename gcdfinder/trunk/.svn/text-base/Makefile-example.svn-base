CC=g++
NVCC=nvcc
DFLAGS=-g
NVFLAGS=-G -O3
MEMFLAGS=-Xptxas="-v"#-options="-v"
ARCHFLAGS=-arch=compute_20 -code=sm_20
CFLAGS=-O3 -Wall -Werror -lrt
PROFFLAG=-pg
ALL=rasterizer_cuda 

all: $(ALL)
rasterizer_cuda: main.cu rasterizer.cu Image.cpp hrt.c
	$(NVCC) $(NVFLAGS) $(DFLAGS) $(PROFFLAG) $(ARCHFLAGS) -o $@ $^

resuse: main.cu rasterizer.cu
	$(NVCC) $(MEMFLAGS) $^

resuse_20: main.cu rasterizer.cu
	$(NVCC) $(MEMFLAGS) $(ARCHFLAGS) $^

colorDiff: colorDiff.cpp Image.cpp
	$(CC) $(CFLAGS) $(DFLAGS) -o $@ $^

clean:
	rm -rf core* *.o *.gch depth.tga render.tga $(ALL)


#all:
#	g++ -pg -o s-rasterizer -g main.c Image.cpp
#clean:
#	rm s-rasterizer
